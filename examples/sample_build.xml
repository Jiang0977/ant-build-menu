<?xml version="1.0" encoding="UTF-8"?>
<project name="AntBuildMenuExample" default="hello" basedir=".">
    
    <!-- é¡¹ç›®æè¿° -->
    <description>
        Ant Build Menu ç¤ºä¾‹é¡¹ç›®
        æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨å³é”®èœå•è¿è¡ŒAntæ„å»ºä»»åŠ¡
    </description>
    
    <!-- å±æ€§å®šä¹‰ -->
    <property name="src.dir" value="src"/>
    <property name="build.dir" value="build"/>
    <property name="dist.dir" value="dist"/>
    <property name="lib.dir" value="lib"/>
    
    <!-- åˆå§‹åŒ–ç›®æ ‡ -->
    <target name="init" description="åˆå§‹åŒ–æ„å»ºç¯å¢ƒ">
        <echo message="åˆå§‹åŒ–æ„å»ºç¯å¢ƒ..."/>
        <tstamp/>
        <mkdir dir="${build.dir}"/>
        <mkdir dir="${dist.dir}"/>
        <echo message="æ„å»ºç›®å½•å·²åˆ›å»º: ${build.dir}"/>
        <echo message="åˆ†å‘ç›®å½•å·²åˆ›å»º: ${dist.dir}"/>
    </target>
    
    <!-- æ¸…ç†ç›®æ ‡ -->
    <target name="clean" description="æ¸…ç†æ„å»ºè¾“å‡º">
        <echo message="æ¸…ç†æ„å»ºè¾“å‡º..."/>
        <delete dir="${build.dir}"/>
        <delete dir="${dist.dir}"/>
        <echo message="æ¸…ç†å®Œæˆ"/>
    </target>
    
    <!-- ç¼–è¯‘ç›®æ ‡ -->
    <target name="compile" depends="init" description="ç¼–è¯‘æºä»£ç ">
        <echo message="ç¼–è¯‘æºä»£ç ..."/>
        <echo message="æºä»£ç ç›®å½•: ${src.dir}"/>
        <echo message="è¾“å‡ºç›®å½•: ${build.dir}"/>
        
        <!-- æ¨¡æ‹Ÿç¼–è¯‘è¿‡ç¨‹ -->
        <echo message="æ­£åœ¨ç¼–è¯‘ Main.java..."/>
        <sleep seconds="1"/>
        <echo message="æ­£åœ¨ç¼–è¯‘ Utils.java..."/>
        <sleep seconds="1"/>
        <echo message="ç¼–è¯‘å®Œæˆ"/>
        
        <!-- åˆ›å»ºæ¨¡æ‹Ÿçš„ç¼–è¯‘è¾“å‡º -->
        <echo file="${build.dir}/Main.class" message="// æ¨¡æ‹Ÿç¼–è¯‘è¾“å‡º - Main.class"/>
        <echo file="${build.dir}/Utils.class" message="// æ¨¡æ‹Ÿç¼–è¯‘è¾“å‡º - Utils.class"/>
    </target>
    
    <!-- æµ‹è¯•ç›®æ ‡ -->
    <target name="test" depends="compile" description="è¿è¡Œæµ‹è¯•">
        <echo message="è¿è¡Œæµ‹è¯•..."/>
        <echo message="æ­£åœ¨è¿è¡Œå•å…ƒæµ‹è¯•..."/>
        <sleep seconds="2"/>
        <echo message="æµ‹è¯•ç»“æœ: 10 ä¸ªæµ‹è¯•é€šè¿‡, 0 ä¸ªå¤±è´¥"/>
        <echo message="æµ‹è¯•è¦†ç›–ç‡: 85%"/>
        <echo message="æµ‹è¯•å®Œæˆ"/>
    </target>
    
    <!-- æ‰“åŒ…ç›®æ ‡ -->
    <target name="package" depends="test" description="æ‰“åŒ…åº”ç”¨ç¨‹åº">
        <echo message="æ‰“åŒ…åº”ç”¨ç¨‹åº..."/>
        
        <!-- åˆ›å»ºJARæ–‡ä»¶ -->
        <echo message="åˆ›å»ºJARæ–‡ä»¶..."/>
        <jar destfile="${dist.dir}/example-app.jar" basedir="${build.dir}">
            <manifest>
                <attribute name="Main-Class" value="Main"/>
                <attribute name="Implementation-Title" value="Ant Build Menu Example"/>
                <attribute name="Implementation-Version" value="1.0"/>
                <attribute name="Built-By" value="${user.name}"/>
                <attribute name="Built-Date" value="${TODAY}"/>
            </manifest>
        </jar>
        
        <echo message="JARæ–‡ä»¶å·²åˆ›å»º: ${dist.dir}/example-app.jar"/>
        <echo message="æ‰“åŒ…å®Œæˆ"/>
    </target>
    
    <!-- æ–‡æ¡£ç”Ÿæˆç›®æ ‡ -->
    <target name="docs" description="ç”Ÿæˆé¡¹ç›®æ–‡æ¡£">
        <echo message="ç”Ÿæˆé¡¹ç›®æ–‡æ¡£..."/>
        <mkdir dir="${dist.dir}/docs"/>
        
        <!-- æ¨¡æ‹Ÿæ–‡æ¡£ç”Ÿæˆ -->
        <echo file="${dist.dir}/docs/README.html" append="false">
&lt;html&gt;
&lt;head&gt;&lt;title&gt;é¡¹ç›®æ–‡æ¡£&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Ant Build Menu ç¤ºä¾‹é¡¹ç›®&lt;/h1&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›®ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨Antæ„å»ºè„šæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;ç”Ÿæˆæ—¶é—´: ${TODAY}&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
        </echo>
        
        <echo message="æ–‡æ¡£å·²ç”Ÿæˆ: ${dist.dir}/docs/"/>
        <echo message="æ–‡æ¡£ç”Ÿæˆå®Œæˆ"/>
    </target>
    
    <!-- éƒ¨ç½²ç›®æ ‡ -->
    <target name="deploy" depends="package" description="éƒ¨ç½²åº”ç”¨ç¨‹åº">
        <echo message="éƒ¨ç½²åº”ç”¨ç¨‹åº..."/>
        <echo message="æ£€æŸ¥éƒ¨ç½²ç¯å¢ƒ..."/>
        <sleep seconds="1"/>
        <echo message="å¤åˆ¶æ–‡ä»¶åˆ°éƒ¨ç½²ç›®å½•..."/>
        <sleep seconds="1"/>
        <echo message="é…ç½®åº”ç”¨ç¨‹åº..."/>
        <sleep seconds="1"/>
        <echo message="éƒ¨ç½²å®Œæˆ"/>
        <echo message="åº”ç”¨ç¨‹åºå·²æˆåŠŸéƒ¨ç½²"/>
    </target>
    
    <!-- å®Œæ•´æ„å»ºç›®æ ‡ -->
    <target name="build" depends="clean,compile,test,package,docs" description="å®Œæ•´æ„å»ºæµç¨‹">
        <echo message="å®Œæ•´æ„å»ºæµç¨‹å·²å®Œæˆ"/>
        <echo message="æ„å»ºæ‘˜è¦:"/>
        <echo message="- æºä»£ç å·²ç¼–è¯‘"/>
        <echo message="- æµ‹è¯•å·²é€šè¿‡"/>
        <echo message="- åº”ç”¨ç¨‹åºå·²æ‰“åŒ…"/>
        <echo message="- æ–‡æ¡£å·²ç”Ÿæˆ"/>
    </target>
    
    <!-- é»˜è®¤ç›®æ ‡ - ç®€å•çš„Hello World -->
    <target name="hello" description="æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯">
        <echo message=""/>
        <echo message="========================================="/>
        <echo message="  æ¬¢è¿ä½¿ç”¨ Ant Build Menu ç¤ºä¾‹é¡¹ç›®!"/>
        <echo message="========================================="/>
        <echo message=""/>
        <echo message="å¯ç”¨çš„æ„å»ºç›®æ ‡:"/>
        <echo message="  hello   - æ˜¾ç¤ºæ­¤æ¬¢è¿æ¶ˆæ¯ (é»˜è®¤)"/>
        <echo message="  init    - åˆå§‹åŒ–æ„å»ºç¯å¢ƒ"/>
        <echo message="  clean   - æ¸…ç†æ„å»ºè¾“å‡º"/>
        <echo message="  compile - ç¼–è¯‘æºä»£ç "/>
        <echo message="  test    - è¿è¡Œæµ‹è¯•"/>
        <echo message="  package - æ‰“åŒ…åº”ç”¨ç¨‹åº"/>
        <echo message="  docs    - ç”Ÿæˆé¡¹ç›®æ–‡æ¡£"/>
        <echo message="  deploy  - éƒ¨ç½²åº”ç”¨ç¨‹åº"/>
        <echo message="  build   - å®Œæ•´æ„å»ºæµç¨‹"/>
        <echo message=""/>
        <echo message="ä½¿ç”¨æ–¹æ³•:"/>
        <echo message="1. å³é”®ç‚¹å‡»æ­¤ build.xml æ–‡ä»¶"/>
        <echo message="2. é€‰æ‹© 'è¿è¡Œ Ant æ„å»º'"/>
        <echo message="3. åœ¨å¼¹å‡ºçš„ç•Œé¢ä¸­é€‰æ‹©æ„å»ºç›®æ ‡"/>
        <echo message="4. ç‚¹å‡» 'å¼€å§‹æ„å»º' æŒ‰é’®"/>
        <echo message=""/>
        <echo message="æ„å»ºç¯å¢ƒä¿¡æ¯:"/>
        <echo message="- Javaç‰ˆæœ¬: ${java.version}"/>
        <echo message="- Java Home: ${java.home}"/>
        <echo message="- æ“ä½œç³»ç»Ÿ: ${os.name} ${os.version}"/>
        <echo message="- ç”¨æˆ·å: ${user.name}"/>
        <echo message="- å·¥ä½œç›®å½•: ${basedir}"/>
        <echo message=""/>
        <echo message="Happy Building! ğŸš€"/>
        <echo message=""/>
    </target>
    
    <!-- å¸®åŠ©ç›®æ ‡ -->
    <target name="help" description="æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯">
        <echo message="Ant Build Menu ç¤ºä¾‹é¡¹ç›®å¸®åŠ©"/>
        <echo message=""/>
        <echo message="è¿™ä¸ªbuild.xmlæ–‡ä»¶æ¼”ç¤ºäº†Ant Build Menuçš„å„ç§åŠŸèƒ½:"/>
        <echo message=""/>
        <echo message="å¿«é€Ÿå¼€å§‹:"/>
        <echo message="1. ç¡®ä¿å·²å®‰è£…Javaå’ŒApache Ant"/>
        <echo message="2. å®‰è£…Ant Build Menuå·¥å…·"/>
        <echo message="3. å³é”®ç‚¹å‡»æ­¤æ–‡ä»¶ï¼Œé€‰æ‹©'è¿è¡Œ Ant æ„å»º'"/>
        <echo message=""/>
        <echo message="ç›®æ ‡è¯´æ˜:"/>
        <echo message="- hello: æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯å’Œç¯å¢ƒä¿¡æ¯"/>
        <echo message="- init: åˆ›å»ºæ„å»ºæ‰€éœ€çš„ç›®å½•ç»“æ„"/>
        <echo message="- clean: åˆ é™¤æ„å»ºç”Ÿæˆçš„æ–‡ä»¶å’Œç›®å½•"/>
        <echo message="- compile: æ¨¡æ‹Ÿç¼–è¯‘Javaæºä»£ç "/>
        <echo message="- test: æ¨¡æ‹Ÿè¿è¡Œå•å…ƒæµ‹è¯•"/>
        <echo message="- package: åˆ›å»ºJARæ–‡ä»¶"/>
        <echo message="- docs: ç”ŸæˆHTMLæ ¼å¼çš„é¡¹ç›®æ–‡æ¡£"/>
        <echo message="- deploy: æ¨¡æ‹Ÿéƒ¨ç½²æµç¨‹"/>
        <echo message="- build: æ‰§è¡Œå®Œæ•´çš„æ„å»ºæµç¨‹"/>
        <echo message=""/>
    </target>
    
</project> 